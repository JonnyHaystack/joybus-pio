<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>joybus-pio: GamecubeConsole Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">joybus-pio
   &#160;<span id="projectnumber">v1.1.0</span>
   </div>
   <div id="projectbrief">GameCube/Nintendo 64 comms library using the RP2040&#39;s PIO</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classGamecubeConsole.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classGamecubeConsole-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GamecubeConsole Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afbb22749a6e9bd4da77a4afaca396ffc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#afbb22749a6e9bd4da77a4afaca396ffc">GamecubeConsole</a> (uint pin, PIO pio=pio0, int sm=-1, int offset=-1)</td></tr>
<tr class="memdesc:afbb22749a6e9bd4da77a4afaca396ffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classGamecubeConsole.html">GamecubeConsole</a> object.  <a href="classGamecubeConsole.html#afbb22749a6e9bd4da77a4afaca396ffc">More...</a><br /></td></tr>
<tr class="separator:afbb22749a6e9bd4da77a4afaca396ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44f0c0357ed4a11092f980170a5b94f"><td class="memItemLeft" align="right" valign="top"><a id="ab44f0c0357ed4a11092f980170a5b94f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#ab44f0c0357ed4a11092f980170a5b94f">~GamecubeConsole</a> ()</td></tr>
<tr class="memdesc:ab44f0c0357ed4a11092f980170a5b94f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanly terminate the joybus PIO instance, freeing the state machine, and uninstalling the joybus program from the PIO instance. <br /></td></tr>
<tr class="separator:ab44f0c0357ed4a11092f980170a5b94f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e892e094b1c7d3c695cdc11ec6cd62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#a13e892e094b1c7d3c695cdc11ec6cd62">Detect</a> ()</td></tr>
<tr class="memdesc:a13e892e094b1c7d3c695cdc11ec6cd62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect if a GameCube console is connected to the joybus port.  <a href="classGamecubeConsole.html#a13e892e094b1c7d3c695cdc11ec6cd62">More...</a><br /></td></tr>
<tr class="separator:a13e892e094b1c7d3c695cdc11ec6cd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23f8580cabdd883a166c55d1fde8de60"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#a23f8580cabdd883a166c55d1fde8de60">WaitForPoll</a> ()</td></tr>
<tr class="memdesc:a23f8580cabdd883a166c55d1fde8de60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until a poll is received from the GameCube console. Automatically responds to any probe/origin commands received in the process.  <a href="classGamecubeConsole.html#a23f8580cabdd883a166c55d1fde8de60">More...</a><br /></td></tr>
<tr class="separator:a23f8580cabdd883a166c55d1fde8de60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0c93512008f332b3f8f4b1ee87252ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#aa0c93512008f332b3f8f4b1ee87252ac">WaitForPollStart</a> ()</td></tr>
<tr class="memdesc:aa0c93512008f332b3f8f4b1ee87252ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until the first byte of a poll command is received from the GameCube console. Automatically responds to any probe/origin commands received in the process. This function is provided in order to make it possible to do processing while the second and third bytes of the poll command. You must call <a class="el" href="classGamecubeConsole.html#a6e635583993a39d3d147c17f0b05246b" title="Block until last two bytes of a poll command are received, or time out after 50us....">WaitForPollEnd()</a> before <a class="el" href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89" title="Send a GameCube controller input report to a connected GameCube console.">SendReport()</a> if using this function.  <a href="classGamecubeConsole.html#aa0c93512008f332b3f8f4b1ee87252ac">More...</a><br /></td></tr>
<tr class="separator:aa0c93512008f332b3f8f4b1ee87252ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e635583993a39d3d147c17f0b05246b"><td class="memItemLeft" align="right" valign="top">PollStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#a6e635583993a39d3d147c17f0b05246b">WaitForPollEnd</a> ()</td></tr>
<tr class="memdesc:a6e635583993a39d3d147c17f0b05246b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until last two bytes of a poll command are received, or time out after 50us. Must be called before <a class="el" href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89" title="Send a GameCube controller input report to a connected GameCube console.">SendReport()</a> if you called <a class="el" href="classGamecubeConsole.html#aa0c93512008f332b3f8f4b1ee87252ac" title="Block until the first byte of a poll command is received from the GameCube console....">WaitForPollStart()</a>.  <a href="classGamecubeConsole.html#a6e635583993a39d3d147c17f0b05246b">More...</a><br /></td></tr>
<tr class="separator:a6e635583993a39d3d147c17f0b05246b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bb65917a23fda8c06af5979837bdf89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89">SendReport</a> (gc_report_t *report)</td></tr>
<tr class="memdesc:a7bb65917a23fda8c06af5979837bdf89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a GameCube controller input report to a connected GameCube console.  <a href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89">More...</a><br /></td></tr>
<tr class="separator:a7bb65917a23fda8c06af5979837bdf89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2701fd55e50faa2d71d12e6fe6be891d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGamecubeConsole.html#a2701fd55e50faa2d71d12e6fe6be891d">GetOffset</a> ()</td></tr>
<tr class="memdesc:a2701fd55e50faa2d71d12e6fe6be891d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the offset at which the PIO program was installed. Useful if you want to communicate with multiple joybus devices without having to load multiple copies of the PIO program.  <a href="classGamecubeConsole.html#a2701fd55e50faa2d71d12e6fe6be891d">More...</a><br /></td></tr>
<tr class="separator:a2701fd55e50faa2d71d12e6fe6be891d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afbb22749a6e9bd4da77a4afaca396ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb22749a6e9bd4da77a4afaca396ffc">&#9670;&nbsp;</a></span>GamecubeConsole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GamecubeConsole::GamecubeConsole </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO&#160;</td>
          <td class="paramname"><em>pio</em> = <code>pio0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sm</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classGamecubeConsole.html">GamecubeConsole</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>The GPIO pin that the GameCube console's data line is connected to </td></tr>
    <tr><td class="paramname">pio</td><td>The PIO instance; either pio0 or pio1. Default is pio0. </td></tr>
    <tr><td class="paramname">sm</td><td>The PIO state machine to run the joybus instance on. Default is to automatically claim an unused one. </td></tr>
    <tr><td class="paramname">offset</td><td>The instruction memory offset at which to load the PIO program. Default is to allocate automatically. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a13e892e094b1c7d3c695cdc11ec6cd62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13e892e094b1c7d3c695cdc11ec6cd62">&#9670;&nbsp;</a></span>Detect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GamecubeConsole::Detect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect if a GameCube console is connected to the joybus port. </p>
<dl class="section return"><dt>Returns</dt><dd>true if console is detected, false otherwise </dd></dl>

</div>
</div>
<a id="a2701fd55e50faa2d71d12e6fe6be891d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2701fd55e50faa2d71d12e6fe6be891d">&#9670;&nbsp;</a></span>GetOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GamecubeConsole::GetOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the offset at which the PIO program was installed. Useful if you want to communicate with multiple joybus devices without having to load multiple copies of the PIO program. </p>
<dl class="section return"><dt>Returns</dt><dd>The offset at which the PIO program was installed </dd></dl>

</div>
</div>
<a id="a7bb65917a23fda8c06af5979837bdf89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bb65917a23fda8c06af5979837bdf89">&#9670;&nbsp;</a></span>SendReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GamecubeConsole::SendReport </td>
          <td>(</td>
          <td class="paramtype">gc_report_t *&#160;</td>
          <td class="paramname"><em>report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a GameCube controller input report to a connected GameCube console. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">report</td><td>The report to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23f8580cabdd883a166c55d1fde8de60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23f8580cabdd883a166c55d1fde8de60">&#9670;&nbsp;</a></span>WaitForPoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GamecubeConsole::WaitForPoll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block until a poll is received from the GameCube console. Automatically responds to any probe/origin commands received in the process. </p>
<dl class="section return"><dt>Returns</dt><dd>true if rumble bit is high, false otherwise </dd></dl>

</div>
</div>
<a id="a6e635583993a39d3d147c17f0b05246b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e635583993a39d3d147c17f0b05246b">&#9670;&nbsp;</a></span>WaitForPollEnd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PollStatus GamecubeConsole::WaitForPollEnd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block until last two bytes of a poll command are received, or time out after 50us. Must be called before <a class="el" href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89" title="Send a GameCube controller input report to a connected GameCube console.">SendReport()</a> if you called <a class="el" href="classGamecubeConsole.html#aa0c93512008f332b3f8f4b1ee87252ac" title="Block until the first byte of a poll command is received from the GameCube console....">WaitForPollStart()</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>PollStatus enum indicating RUMBLE_OFF, RUMBLE_ON, or ERROR </dd></dl>

</div>
</div>
<a id="aa0c93512008f332b3f8f4b1ee87252ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0c93512008f332b3f8f4b1ee87252ac">&#9670;&nbsp;</a></span>WaitForPollStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GamecubeConsole::WaitForPollStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block until the first byte of a poll command is received from the GameCube console. Automatically responds to any probe/origin commands received in the process. This function is provided in order to make it possible to do processing while the second and third bytes of the poll command. You must call <a class="el" href="classGamecubeConsole.html#a6e635583993a39d3d147c17f0b05246b" title="Block until last two bytes of a poll command are received, or time out after 50us....">WaitForPollEnd()</a> before <a class="el" href="classGamecubeConsole.html#a7bb65917a23fda8c06af5979837bdf89" title="Send a GameCube controller input report to a connected GameCube console.">SendReport()</a> if using this function. </p>
<dl class="section return"><dt>Returns</dt><dd>The reading mode requested by the poll command </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="GamecubeConsole_8hpp_source.html">GamecubeConsole.hpp</a></li>
<li>src/GamecubeConsole.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classGamecubeConsole.html">GamecubeConsole</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
